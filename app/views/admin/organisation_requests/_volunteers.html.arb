# frozen_string_literal: true

div class: 'title h4' do
  span 'Dobrovolníci'
  span link_to('', admin_volunteers_path(params: resource.decorate.volunteer_params), class: 'action add', data: { turbolinks: false }) if can?(:manage, Request)
end

table_for resource.requested_volunteers.includes(:volunteer).order(:state).map(&:decorate) do
  column :first_name
  column :last_name
  column :phone
  column :state do |requested_volunteer|
    best_in_place requested_volunteer, :state, as: :select,
                                               collection: I18n.t('activerecord.attributes.requested_volunteer.states'),
                                               url: admin_organisation_request_requested_volunteer_path(resource, requested_volunteer)
  end
  column 'Zprávy' do |requested_volunteer|
    link_to 'poslat', new_admin_volunteer_message_path(requested_volunteer.volunteer_id, request_id: resource.id)
  end
end
